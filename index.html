<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¬¼ë•Œ & ì¡°ë¥˜ ì •ë³´</title>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; connect-src 'self' https://tide-api-proxy.odk297.workers.dev https://cdn.jsdelivr.net; img-src 'self' data:;">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js" integrity="sha384-vsrfeLOOY6KuIYKDlmVH5UiBmgIdB1oEf7p01YgWHuqmOHfZr374+odEv96n9tNC" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.1.0/dist/chartjs-plugin-annotation.min.js" integrity="sha384-3N9GHhCtN3CQef6tNfqgZlv7sQLYIkcChN+uaTZ7xVdzKYp/SjBNPxa92+hM7EAY" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/korean-lunar-calendar/dist/korean-lunar-calendar.min.js" integrity="sha384-j2B3PtxdEJouApN6GZLZXajab489KytFYmY/gDo6Dp3afstT7oZmYu0YvIik1OoV" crossorigin="anonymous"></script>
    <style>
        :root {
            --bg: #0a1628;
            --card: #111d35;
            --border: #1e3a5f;
            --primary: #4fc3f7;
            --accent: #00e5ff;
            --high: #ff6b6b;
            --low: #4ecdc4;
            --text: #e0e6ed;
            --muted: #7a8ba3;
            --warn: #ffa726;
        }
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: 'Segoe UI', -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
        }
        .container { max-width: 960px; margin: 0 auto; padding: 16px; }
        header { text-align: center; padding: 20px 0 12px; position: relative; }
        .visitor-counter { position: absolute; top: 8px; right: 0; font-size: 0.7em; color: var(--muted); white-space: nowrap; letter-spacing: 0.3px; }
        header h1 { font-size: 1.6em; color: var(--accent); display: flex; align-items: center; justify-content: center; gap: 10px; }
        header h1 .wave { font-size: 1.3em; }
        .controls { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 16px; align-items: flex-end; }
        .control-group { flex: 1; min-width: 140px; }
        .control-group label { display: flex; align-items: center; font-size: 0.51em; color: var(--muted); margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.5px; }
        select, input[type="date"] { width: 100%; padding: 8px 12px; background: var(--card); border: 1px solid var(--border); border-radius: 8px; color: var(--text); font-size: 0.95em; font-family: 'Segoe UI', -apple-system, sans-serif; outline: none; cursor: pointer; }
        input[type="date"] { position: relative; color-scheme: dark; }
        input[type="date"]::-webkit-datetime-edit { color: var(--text); font-family: 'Segoe UI', -apple-system, sans-serif; width: 100%; text-align: center; padding: 0; margin: auto; }
        input[type="date"]::-webkit-calendar-picker-indicator { position: absolute; top: 0; left: 0; right: 0; bottom: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; }
        select:focus, input:focus { border-color: var(--primary); box-shadow: 0 0 0 2px rgba(79,195,247,0.2); }
        .btn { padding: 10px 24px; background: linear-gradient(135deg, #1a73e8, #4fc3f7); border: none; border-radius: 8px; color: #fff; font-size: 0.95em; font-weight: 600; cursor: pointer; transition: all 0.2s; white-space: nowrap; }
        .btn:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(79,195,247,0.3); }
        .btn:active { transform: translateY(0); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 20px; margin-bottom: 16px; }
        .card-title { font-size: 1em; color: var(--primary); margin-bottom: 14px; display: flex; align-items: center; gap: 8px; font-weight: 600; }
        .chart-title-row { display: flex; align-items: center; width: 100%; gap: 8px; }
        .tide-chart-load-status { margin-left: auto; display: inline-flex; align-items: center; gap: 6px; font-size: 0.72em; color: var(--muted); }
        .tide-chart-load-status.is-loading .tide-chart-load-text { color: #ffb74d; }
        .tide-chart-load-status.is-done .tide-chart-load-text { color: #69f0ae; }
        .tide-chart-load-status.is-error .tide-chart-load-text { color: var(--high); }
        .tide-chart-reload-btn {
            width: 20px;
            height: 20px;
            border: 1px solid var(--border);
            border-radius: 50%;
            background: rgba(255,255,255,0.03);
            color: var(--primary);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.95em;
            line-height: 1;
            cursor: pointer;
            transition: all 0.2s;
            padding: 0;
        }
        .tide-chart-reload-btn:hover { background: rgba(79,195,247,0.14); }
        .tide-chart-reload-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .tide-chart-reload-btn.is-spinning { animation: spin 0.8s linear infinite; }
        .tide-data-stamp { margin-top: -8px; margin-bottom: 10px; font-size: 0.72em; color: var(--muted); letter-spacing: 0.02em; }
        .tide-summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px; }
        .tide-item { background: rgba(255,255,255,0.03); border-radius: 10px; padding: 14px; text-align: center; border: 1px solid rgba(255,255,255,0.05); }
        .tide-item.high { border-left: 3px solid var(--high); }
        .tide-item.low { border-left: 3px solid var(--low); }
        .tide-item.diff { border-left: 3px solid var(--warn); }
        .tide-item .label { font-size: 0.85em; color: var(--muted); text-transform: uppercase; letter-spacing: 0.5px; }
        .tide-item .value { font-size: 1.8em; font-weight: 700; margin: 4px 0; }
        .tide-item.high .value { color: var(--high); }
        .tide-item.low .value { color: var(--low); }
        .tide-item.diff .value { color: var(--warn); }
        .tide-item .time { font-size: 0.92em; color: var(--muted); }
        .chart-container { position: relative; height: 320px; }
        .current-table { width: 100%; border-collapse: collapse; table-layout: fixed; }
        .current-table th { text-align: center; padding: 8px; font-size: 0.78em; color: var(--muted); text-transform: uppercase; border-bottom: 1px solid var(--border); }
        .current-table td { padding: 8px; font-size: 0.9em; border-bottom: 1px solid rgba(255,255,255,0.04); text-align: center; }
        .current-table th:nth-child(1),
        .current-table td:nth-child(1) { width: 60px; white-space: nowrap; }
        .current-table th:nth-child(2),
        .current-table td:nth-child(2) { width: 60px; white-space: nowrap; }
        .current-table th.current-speed-col,
        .current-table td.current-speed-col { width: 60px; white-space: nowrap; }
        .current-table td.current-dir-col,
        .current-table td.current-speed-col {
            font-size: 0.85em;
        }
        .current-unit-toggle-btn {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: rgba(79,195,247,0.08);
            color: var(--primary);
            font-size: inherit;
            font-weight: 600;
            text-transform: none;
            padding: 2px 6px;
            cursor: pointer;
            line-height: 1;
            transition: all 0.2s;
        }
        .current-unit-toggle-btn:hover { background: rgba(79,195,247,0.18); border-color: #2a6fa3; }
        .current-unit-toggle-btn:focus-visible { outline: none; box-shadow: 0 0 0 2px rgba(79,195,247,0.35); }
        .current-unit-toggle-btn .unit-icon { font-size: 0.85em; opacity: 0.95; }
        .current-unit-toggle-btn .unit-hint { font-size: 0.72em; color: var(--muted); font-weight: 600; }
        .speed-bar-wrap { display: flex; align-items: center; gap: 4px; margin-top: 2px; }
        .speed-bar { flex: 1; height: 10px; border-radius: 5px; background: var(--border); overflow: hidden; }
        .speed-bar-fill { height: 100%; border-radius: 5px; transition: width 0.5s; }
        .speed-bar-pct { font-size: 0.68em; color: var(--muted); min-width: 28px; text-align: right; white-space: nowrap; }
        .loading { text-align: center; padding: 40px; color: var(--muted); }
        .loading .spinner { display: inline-block; width: 32px; height: 32px; border: 3px solid var(--border); border-top-color: var(--primary); border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .error-msg { color: var(--high); text-align: center; padding: 20px; font-size: 0.9em; }
        .tide-detail-list { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px; }
        .tide-tag { padding: 6px 14px; border-radius: 20px; font-size: 0.82em; font-weight: 500; }
        .tide-tag.high { background: rgba(255,107,107,0.15); color: var(--high); }
        .tide-tag.low { background: rgba(78,205,196,0.15); color: var(--low); }
        .tide-item.sun { border-left: 3px solid #ffb74d; }
        .sun-row { display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 1.05em; }
        .sun-row .sun-time { color: #ffb74d; font-weight: 700; font-size: 1.15em; }
        .sun-row .sun-label { color: var(--muted); font-size: 0.85em; }
        footer { text-align: center; padding: 20px; color: var(--muted); font-size: 0.75em; }
        .tabs { display: flex; gap: 4px; margin-bottom: 16px; border-bottom: 1px solid var(--border); }
        .tab-btn { padding: 10px 20px; background: transparent; border: none; color: var(--muted); font-size: 0.9em; cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.2s; }
        .tab-btn.active { color: var(--primary); border-bottom-color: var(--primary); }
        .tab-btn:hover { color: var(--text); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* ë°©ë¥˜ ì•Œë¦¼ í…Œì´ë¸” */
        .discharge-table { width: 100%; border-collapse: collapse; }
        .discharge-table th { text-align: center; padding: 8px 6px; font-size: 0.78em; color: var(--muted); border-bottom: 1px solid var(--border); }
        .discharge-table td { padding: 8px 6px; font-size: 0.85em; border-bottom: 1px solid rgba(255,255,255,0.04); }
        .discharge-table td:nth-child(1) { text-align: left; padding-left: 12px; }
        .discharge-table th:nth-child(2) { width: 82px; text-align: center; }
        .discharge-table td:nth-child(2) { text-align: center; font-size: 0.78em; color: var(--muted); }
        .discharge-table tr.discharge-highlight { background: rgba(79,195,247,0.08); }
        .discharge-table tr.discharge-highlight td { color: var(--primary); }
        .discharge-title { color: var(--text); cursor: pointer; display: flex; align-items: center; gap: 6px; }
        .discharge-title:hover { color: var(--primary); }
        .discharge-title .arrow { font-size: 0.7em; transition: transform 0.2s; color: var(--muted); }
        .discharge-title.open .arrow { transform: rotate(90deg); }
        .discharge-highlight .discharge-title { color: var(--primary); font-weight: 600; }
        .discharge-content { padding: 10px 12px; font-size: 0.82em; color: var(--muted); line-height: 1.7; white-space: normal; word-break: keep-all; background: rgba(255,255,255,0.02); border-bottom: 1px solid rgba(255,255,255,0.04); }
        .discharge-content-row { display: none; }
        .discharge-content-row.open { display: table-row; }

        /* ê²€ìƒ‰ ë°” */
        .search-bar { position: relative; margin-bottom: 16px; }
        .search-bar input { width: 100%; padding: 12px 16px 12px 40px; background: var(--card); border: 1px solid var(--border); border-radius: 10px; color: var(--text); font-size: 0.95em; outline: none; }
        .search-bar:focus-within { border-color: var(--primary); box-shadow: 0 0 0 2px rgba(79,195,247,0.2); }
        .search-bar input:focus { outline: none; box-shadow: none; }
        .search-bar .search-icon { position: absolute; left: 14px; top: 50%; transform: translateY(-50%); font-size: 1em; color: var(--muted); pointer-events: none; }
        .search-results { position: absolute; top: 100%; left: 0; right: 0; background: var(--card); border: 1px solid var(--border); border-radius: 10px; max-height: 320px; overflow-y: auto; z-index: 100; display: none; box-shadow: 0 8px 24px rgba(0,0,0,0.4); margin-top: 4px; }
        .search-results.show { display: block; }
        .search-result-item { padding: 10px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.04); }
        .search-result-item:hover { background: rgba(79,195,247,0.1); }
        .search-result-item:last-child { border-bottom: none; }
        .search-result-item .name { color: var(--text); font-size: 0.9em; }
        .search-result-item .name em { color: var(--accent); font-style: normal; font-weight: 600; }
        .search-result-item .tags { display: flex; gap: 4px; }
        .search-result-item .tag { padding: 2px 8px; border-radius: 10px; font-size: 0.7em; font-weight: 500; }
        .search-result-item .tag.obs { background: rgba(79,195,247,0.15); color: var(--primary); }
        .search-result-item .tag.crnt { background: rgba(0,229,255,0.15); color: var(--accent); }
        .search-result-item .tag.region { background: rgba(255,167,38,0.15); color: var(--warn); }
        .search-no-result { padding: 16px; text-align: center; color: var(--muted); font-size: 0.85em; }
        .region-badge { display: inline-block; padding: 2px 10px; border-radius: 10px; font-size: 1em; background: rgba(79,195,247,0.12); color: var(--primary); margin-left: 2px; vertical-align: middle; }
        .mulddae-card { display: flex; flex-direction: column; gap: 8px; }
        .mulddae-row1 { display: flex; align-items: center; gap: 10px; }
        .mulddae-badge { display: flex; align-items: center; gap: 6px; padding: 6px 12px; border-radius: 12px; font-weight: 700; flex-shrink: 0; }
        .mulddae-badge .mulddae-emoji { font-size: 1.3em; line-height: 1; }
        .mulddae-badge .mulddae-moon { width: 1.86em; height: 1.86em; border-radius: 50%; flex-shrink: 0; object-fit: cover; }
        .mulddae-badge .mulddae-num { font-size: 1.1em; }
        .mulddae-pct-wrap { display: flex; flex-direction: column; align-items: stretch; gap: 4px; flex: 1; min-width: 0; }
        .mulddae-pct-head { display: flex; align-items: center; justify-content: space-between; gap: 8px; }
        .mulddae-pct-value-wrap { display: inline-flex; align-items: baseline; gap: 6px; flex-shrink: 0; }
        .mulddae-pct-label-inline { color: var(--muted); font-size: 0.82em; }
        .mulddae-pct-value { font-weight: 700; font-size: 0.95em; }
        .mulddae-pct-bar { display: block; width: 100%; height: 8px; background: var(--border); border-radius: 4px; overflow: hidden; }
        .mulddae-pct-bar-fill { height: 100%; border-radius: 4px; }
        .mulddae-desc { font-size: 0.85em; color: var(--muted); }
        .fishing-index-wrap { font-size: 0.76em; margin: 4px 0; position: relative; display: inline-block; }
        .fishing-index-btn { color: #8fc4ff; cursor: pointer; display: inline-flex; align-items: center; gap: 4px; user-select: none; background: rgba(59,130,246,0.12); border: 1px solid rgba(59,130,246,0.3); border-radius: 16px; padding: 3px 10px; font-size: 0.88em; transition: all 0.2s; }
        .fishing-index-btn:hover { color: #b8daff; background: rgba(59,130,246,0.22); border-color: rgba(59,130,246,0.5); }
        .fishing-index-btn::after { content: 'â–¾'; font-size: 0.7em; margin-left: 2px; opacity: 0.6; }
        .fishing-popup { position: absolute; left: 0; top: 110%; z-index: 100; background: #1a2a44; border: 1px solid #2a4a6f; border-radius: 8px; padding: 10px 14px; font-size: 0.95em; color: #c8ddf0; line-height: 1.7; white-space: nowrap; box-shadow: 0 4px 16px rgba(0,0,0,0.4); }
        .mulddae-species { display: flex; gap: 6px; flex-wrap: wrap; }

        @media (max-width: 600px) {
            .controls { flex-direction: column; }
            .control-group { min-width: 100%; }
            .chart-container { height: 260px; }
            .tide-summary { grid-template-columns: repeat(3, 1fr); gap: 8px; }
            header h1 { font-size: 1.3em; }
            .mulddae-card { gap: 6px; }
            .mulddae-row1 { flex-wrap: wrap; gap: 8px; }
            .species-btns { flex-wrap: wrap !important; }
            .card-title { flex-wrap: wrap; }
        }
        @media (max-width: 480px) {
            .container { padding: 10px; }
            header { padding: 12px 0 8px; }
            header h1 { font-size: 1.15em; }
            .visitor-counter { position: static; text-align: center; margin-top: 4px; font-size: 0.65em; }
            .card { padding: 14px; margin-bottom: 12px; }
            .card-title { font-size: 0.9em; margin-bottom: 10px; }
            .tide-summary { grid-template-columns: repeat(3, 1fr); gap: 6px; }
            .tide-item { padding: 10px 4px; }
            .tide-item .value { font-size: 1.3em; }
            .tide-item .label { font-size: 0.7em; }
            .tide-item .time { font-size: 0.78em; }
            .chart-container { height: 240px; }
            .species-btn { font-size: 0.7em !important; padding: 3px 8px !important; }
            .mulddae-card { gap: 5px; }
            .mulddae-badge { padding: 5px 10px; }
            .mulddae-badge .mulddae-emoji { font-size: 1.1em; }
            .mulddae-badge .mulddae-moon { width: 1.56em; height: 1.56em; }
            .mulddae-badge .mulddae-num { font-size: 1em; }
            .mulddae-desc { font-size: 0.8em; }
            .mulddae-pct-label-inline { font-size: 0.76em; }
            .tide-data-stamp { font-size: 0.68em; }
            .tab-btn { padding: 8px 14px; font-size: 0.85em; }
            .btn { padding: 8px 16px; font-size: 0.88em; }
            .sun-row { font-size: 0.9em; }
            .sun-row .sun-time { font-size: 1em; }
            .current-unit-toggle-btn .unit-hint { display: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><span class="wave">ğŸŒŠ</span> ë¬¼ë•Œ & ì¡°ë¥˜ ì •ë³´</h1>
            <div class="visitor-counter" id="visitorCounter"></div>
        </header>

        <!-- Controls -->
        <div class="controls" style="margin-bottom:12px;">
            <div class="control-group" style="display:flex;gap:8px;flex-wrap:nowrap;align-items:flex-end;">
                <div style="flex:1;min-width:0;">
                    <label style="white-space:nowrap;">ê´€ì¸¡ì†Œ(ì¡°ìœ„)<span class="region-badge" id="stationRegion" style="margin-left:2px;">ì¸ì²œ/ê²½ê¸°</span></label>
                    <select id="stationSelect"></select>
                </div>
                <div style="flex:1;min-width:0;">
                    <label>ì¡°ë¥˜ ì˜ˆë³´ì <span class="region-badge" id="currentRegion" style="margin-left:2px;">ì¸ì²œ/ê²½ê¸°</span></label>
                    <select id="currentSelect"></select>
                </div>
            </div>
        </div>

        <!-- ê²€ìƒ‰ -->
        <div class="search-bar" id="searchBar" style="display:flex;align-items:center;gap:0;background:var(--card);border:1px solid var(--border);border-radius:10px;padding:0;cursor:text;">
            <span class="search-icon" style="position:static;transform:none;padding-left:14px;flex-shrink:0;">ğŸ”</span>
            <input type="text" id="searchInput" placeholder="&#xAC80;&#xC0C9;" autocomplete="off" style="flex:1;min-width:60px;background:transparent;border:none;padding:12px 8px 12px 8px;" />
            <span id="searchPortInfo" style="display:none;font-size:0.7em;color:var(--muted);white-space:nowrap;padding-right:8px;margin-left:-6px;flex-shrink:0;">â†’ ì¡°ìœ„: <strong id="searchPortStation" style="color:var(--primary)"></strong> Â· ì¡°ë¥˜: <strong id="searchPortCurrent" style="color:var(--accent)"></strong></span>
            <div class="search-results" id="searchResults"></div>
        </div>

        <!-- ë‚ ì§œ ì»¨íŠ¸ë¡¤ -->
        <div class="controls" style="margin-top:0;">
            <div class="control-group">
                <div style="display:flex;align-items:flex-end;gap:4px;">
                    <div style="display:flex;flex-direction:column;align-items:center;gap:2px;">
                        <span style="font-size:0.85em;color:var(--muted);">ì›”</span>
                        <div style="display:flex;gap:4px;align-items:stretch;">
                            <button class="btn" data-month-shift="-1" style="padding:0 10px;font-size:0.9em;min-width:0;height:36px;">â—€</button>
                            <button class="btn" data-month-shift="1" style="padding:0 10px;font-size:0.9em;min-width:0;height:36px;">â–¶</button>
                        </div>
                    </div>
                    <div style="flex:1;display:flex;flex-direction:column;align-items:center;gap:2px;min-width:0;">
                        <span style="font-size:0.85em;color:var(--muted);">ë‚ ì§œ</span>
                        <div style="position:relative;width:100%;height:36px;">
                            <input type="date" id="dateInput" style="position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer;z-index:2;" />
                            <div id="dateDisplay" style="width:100%;height:36px;line-height:36px;background:var(--card);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:1em;text-align:center;cursor:pointer;position:relative;z-index:1;box-sizing:border-box;">2026ë…„ 02ì›” 15ì¼</div>
                        </div>
                    </div>
                    <div style="display:flex;flex-direction:column;align-items:center;gap:2px;">
                        <span style="font-size:0.85em;color:var(--muted);">ì¼</span>
                        <div style="display:flex;gap:4px;align-items:stretch;">
                            <button class="btn" id="btnPrev" style="padding:0 10px;font-size:0.9em;min-width:0;height:36px;">â—€</button>
                            <button class="btn" id="btnNext" style="padding:0 10px;font-size:0.9em;min-width:0;height:36px;">â–¶</button>
                        </div>
                    </div>
                    <button class="btn" id="btnToday" style="padding:0 12px;font-size:0.9em;min-width:0;height:36px;align-self:flex-end;">ì˜¤ëŠ˜</button>
                </div>
            </div>
        </div>

        <!-- ë‚šì‹œ í¬ì¸íŠ¸ ì—°ê²° í‘œì‹œ ë°°ë„ˆ -->
        <div id="portBanner" style="display:none; margin-bottom:6px; padding:6px 12px; background:rgba(0,229,255,0.08); border:1px solid rgba(0,229,255,0.2); border-radius:8px; font-size:0.85em;">
            <span style="color:var(--accent);">ğŸ“ <strong id="portBannerName"></strong></span>
            <span style="color:var(--muted);margin-left:8px;">â†’ ì¡°ìœ„: <strong id="portBannerStation" style="color:var(--primary)"></strong> Â· ì¡°ë¥˜: <strong id="portBannerCurrent" style="color:var(--accent)"></strong></span>
            <span id="portBannerClose" style="float:right;cursor:pointer;color:var(--muted);font-size:1.1em;" title="ë‹«ê¸°">âœ•</span>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="tide">ë¬¼ë•Œ/ì¡°ìœ„</button>
            <button class="tab-btn" data-tab="current">ì¡°ë¥˜ ìœ ì†</button>
            <button class="tab-btn" data-tab="combined">ì¡°ìœ„-ìœ ì† ê·¸ë˜í”„</button>
            <button class="tab-btn" data-tab="discharge">ë°©ë¥˜ê³„íš</button>
        </div>

        <!-- Tide Tab -->
        <div class="tab-content active" id="tab-tide">
            <div class="card" id="mulddaeCard" style="display:none;">
                <div class="card-title" style="flex-wrap:wrap;gap:6px;align-items:center;">ì˜¤ëŠ˜ì˜ ë¬¼ë•Œ <span id="mulddaeDate" style="font-weight:600;color:var(--text);font-size:0.88em;"></span><button type="button" id="mulddaeReloadBtn" class="tide-chart-reload-btn" style="margin-left:auto;" aria-label="ë¬¼ë•Œ ìƒˆë¡œê³ ì¹¨" title="ë¬¼ë•Œ ìƒˆë¡œê³ ì¹¨">â†»</button></div>
                <div id="mulddaeInfo" class="mulddae-card"></div>
                <div id="mulddaeSpeciesInfo" style="display:none;margin-top:10px;"></div>
            </div>
            <div class="card" id="tideSummaryCard">
                <div class="card-title">ğŸ“Š ê³ ì €ì¡° ì •ë³´</div>
                <div id="tideDataStamp" class="tide-data-stamp">ì˜ˆë³´ ìƒì„±ì‹œê° -</div>
                <div id="tideSummary"><div style="text-align:center;color:var(--muted);padding:20px;">ê´€ì¸¡ì†Œì™€ ë‚ ì§œë¥¼ ì„ íƒ í›„ ì¡°íšŒí•˜ì„¸ìš”</div></div>
            </div>
            <div class="card">
                <div class="card-title" style="flex-wrap:wrap;gap:8px;">
                    <div class="chart-title-row">
                        <span>ğŸ“ˆ ì¡°ìœ„ ë³€í™” ê·¸ë˜í”„</span>
                        <div id="tideChartLoadStatus" class="tide-chart-load-status">
                            <span id="tideChartLoadText" class="tide-chart-load-text">ëŒ€ê¸°</span>
                            <button type="button" id="tideChartReloadBtn" class="tide-chart-reload-btn" aria-label="ì¡°ìœ„ ê·¸ë˜í”„ ìƒˆë¡œê³ ì¹¨" title="ì¡°ìœ„ ê·¸ë˜í”„ ìƒˆë¡œê³ ì¹¨">â†»</button>
                        </div>
                    </div>
                </div>
                <div class="species-btns" style="display:flex;gap:6px;flex-wrap:wrap;margin-bottom:10px;">
                    <button class="species-btn" data-species="none" style="padding:4px 12px;border-radius:16px;border:1px solid var(--border);background:transparent;color:var(--muted);font-size:0.78em;cursor:pointer;transition:all 0.2s;">ì–´ì¢… OFF</button>
                    <button class="species-btn" data-species="jjukkumi" style="padding:4px 12px;border-radius:16px;border:1px solid var(--border);background:transparent;color:var(--muted);font-size:0.78em;cursor:pointer;transition:all 0.2s;">ğŸ™ ì­ˆê¾¸ë¯¸</button>
                    <button class="species-btn" data-species="gapoh" style="padding:4px 12px;border-radius:16px;border:1px solid var(--border);background:transparent;color:var(--muted);font-size:0.78em;cursor:pointer;transition:all 0.2s;">ğŸ¦‘ ê°‘ì˜¤ì§•ì–´</button>
                    <button class="species-btn" data-species="muneo" style="padding:4px 12px;border-radius:16px;border:1px solid var(--border);background:transparent;color:var(--muted);font-size:0.78em;cursor:pointer;transition:all 0.2s;">ğŸ™ ë¬¸ì–´</button>
                </div>
                <div id="speciesLegend" style="display:none;margin-bottom:10px;padding:8px 12px;background:rgba(255,255,255,0.03);border-radius:8px;font-size:0.8em;color:var(--muted);line-height:1.6;"></div>
                <div id="tideLegend" style="display:none;margin-bottom:6px;font-size:0.75em;color:var(--muted);align-items:center;gap:10px;flex-wrap:wrap;"></div>
                <div id="chartSlackInfo" style="display:none;font-size:0.65em;margin-bottom:4px;color:var(--muted);gap:4px;flex-wrap:wrap;align-items:center;letter-spacing:0.03em;"></div>
                <div class="chart-container" style="margin-right:-15px;"><canvas id="tideChart"></canvas></div>
            </div>
        </div>

        <!-- Current Tab -->
        <div class="tab-content" id="tab-current">
            <div class="card">
                <div class="card-title" style="display:flex;align-items:center;justify-content:space-between;">ğŸŒ€ ì¡°ë¥˜ ì •ë³´ (ìœ í–¥/ìœ ì†)<button type="button" class="current-unit-toggle-btn" title="í´ë¦­í•´ì„œ cm/sì™€ k/n ë‹¨ìœ„ë¥¼ ì „í™˜" aria-label="ìœ ì† ë‹¨ìœ„ ì „í™˜"><span id="currentInfoUnitLabel">ìœ ì† (cm/s)</span><span class="unit-icon">â‡„</span><span class="unit-hint">í´ë¦­ ì „í™˜</span></button></div>
                <div id="currentInfo"><div style="text-align:center;color:var(--muted);padding:20px;">ì¡°ë¥˜ ì˜ˆë³´ì ê³¼ ë‚ ì§œë¥¼ ì„ íƒ í›„ ì¡°íšŒí•˜ì„¸ìš”</div></div>
            </div>
            <div class="card">
                <div class="card-title" style="display:flex;align-items:center;justify-content:space-between;">ğŸ“ˆ ì¡°ë¥˜ ìœ ì† ê·¸ë˜í”„<span id="currentChartUnitLabel" style="font-size:0.98em;color:var(--muted);font-weight:400;">cm/s</span></div>
                <div class="chart-container"><canvas id="currentChart"></canvas></div>
            </div>
        </div>

        <!-- Combined Tab -->
        <div class="tab-content" id="tab-combined">
            <div class="card" style="padding-bottom:12px;">
                <div class="card-title" style="margin-bottom:4px;display:flex;align-items:center;justify-content:space-between;">ğŸ“Š ì¡°ìœ„-ìœ ì† ë³µí•© ê·¸ë˜í”„<button type="button" class="current-unit-toggle-btn" title="í´ë¦­í•´ì„œ cm/sì™€ k/n ë‹¨ìœ„ë¥¼ ì „í™˜" aria-label="ìœ ì† ë‹¨ìœ„ ì „í™˜"><span id="combinedSpeedUnitLabel">ìœ ì† (cm/s)</span><span class="unit-icon">â‡„</span><span class="unit-hint">í´ë¦­ ì „í™˜</span></button></div>
                <div id="combinedChartLegend" style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:2px;padding:3px 6px;background:rgba(255,255,255,0.03);border-radius:8px;font-size:0.75em;color:var(--muted);align-items:center;"></div>
                <div class="chart-container" style="height:380px;"><canvas id="combinedChart"></canvas></div>
                <div id="combinedChartInfo" style="margin-top:10px;font-size:0.76em;color:var(--muted);text-align:center;letter-spacing:0.02em;"></div>
            </div>
        </div>

        <!-- Discharge Tab -->
        <div class="tab-content" id="tab-discharge">
            <div class="card">
                <div class="card-title" style="display:flex;align-items:center;justify-content:space-between;">
                    ğŸš° ë°©ë¥˜ ê³„íš ì•Œë¦¼
                    <div style="display:flex;align-items:center;gap:8px;">
                        <span id="dischargeUpdatedAt" style="font-size:0.72em;color:var(--muted);font-weight:400;"></span>
                        <button type="button" id="dischargeReloadBtn" class="tide-chart-reload-btn" aria-label="ë°©ë¥˜ ì•Œë¦¼ ìƒˆë¡œê³ ì¹¨" title="ë°©ë¥˜ ì•Œë¦¼ ìƒˆë¡œê³ ì¹¨">â†»</button>
                    </div>
                </div>
                <div id="dischargeNotice">
                    <div style="text-align:center;color:var(--muted);padding:20px;">ë°©ë¥˜ ê³„íš ì•Œë¦¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                </div>
                <div style="margin-top:8px;font-size:0.7em;color:var(--muted);text-align:center;">
                    ì¶œì²˜: <a href="https://rims.ekr.or.kr/awminfo/WsNoticeList.do" target="_blank" rel="noopener" style="color:var(--muted);text-decoration:underline;">ë†ì´Œìš©ìˆ˜ì¢…í•©ì •ë³´ì‹œìŠ¤í…œ(RIMS)</a> Â· 10ë¶„ ìë™ê°±ì‹ 
                </div>
            </div>
        </div>

        <footer>
            ë°ì´í„° ì¶œì²˜: êµ­ë¦½í•´ì–‘ì¡°ì‚¬ì› (ê³µê³µë°ì´í„°í¬í„¸)<br>
            â€» ì˜ˆì¸¡ ë°ì´í„°ì´ë©°, ì‹¤ì œ ê°’ê³¼ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
